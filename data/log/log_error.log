25-08-12.11:03:50.036 [http-nio-8080-exec-3] ERROR AiAdminAgentController - 新增AI智能体异常
org.springframework.jdbc.BadSqlGrammarException: 
### Error updating database.  Cause: java.sql.SQLException: Column count doesn't match value count at row 1
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiAgentDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_agent (             agent_name, channel, description, status, create_time, update_time         ) VALUES (             ?, ?, ?, ?, ?         )
### Cause: java.sql.SQLException: Column count doesn't match value count at row 1
; bad SQL grammar []
	at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:112)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:116)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:116)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy77.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy79.insert(Unknown Source)
	at com.onepiece.trigger.http.admin.AiAdminAgentController.addAiAgent(AiAdminAgentController.java:84)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.sql.SQLException: Column count doesn't match value count at row 1
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 55 common frames omitted
25-08-12.11:03:54.680 [http-nio-8080-exec-4] ERROR AiAdminAgentController - 新增AI智能体异常
org.springframework.jdbc.BadSqlGrammarException: 
### Error updating database.  Cause: java.sql.SQLException: Column count doesn't match value count at row 1
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiAgentDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_agent (             agent_name, channel, description, status, create_time, update_time         ) VALUES (             ?, ?, ?, ?, ?         )
### Cause: java.sql.SQLException: Column count doesn't match value count at row 1
; bad SQL grammar []
	at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:112)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:116)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:116)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy77.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy79.insert(Unknown Source)
	at com.onepiece.trigger.http.admin.AiAdminAgentController.addAiAgent(AiAdminAgentController.java:84)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.sql.SQLException: Column count doesn't match value count at row 1
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 55 common frames omitted
25-08-12.11:17:56.582 [http-nio-8080-exec-2] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:18:10.840 [http-nio-8080-exec-5] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:18:14.867 [http-nio-8080-exec-7] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:18:15.217 [http-nio-8080-exec-9] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:18:30.589 [http-nio-8080-exec-1] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:18:31.669 [http-nio-8080-exec-3] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:18:53.580 [http-nio-8080-exec-5] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:18:54.054 [http-nio-8080-exec-7] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:19:08.203 [http-nio-8080-exec-9] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:19:09.262 [http-nio-8080-exec-1] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:19:50.314 [http-nio-8080-exec-4] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:19:50.991 [http-nio-8080-exec-6] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:20:04.778 [http-nio-8080-exec-9] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:20:05.193 [http-nio-8080-exec-2] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:20:21.676 [http-nio-8080-exec-3] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:20:21.965 [http-nio-8080-exec-8] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:20:33.201 [http-nio-8080-exec-2] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:20:39.329 [http-nio-8080-exec-10] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@628dc8eb (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.11:20:49.366 [http-nio-8080-exec-10] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@700f0dbf (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.11:20:54.379 [http-nio-8080-exec-6] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:20:54.397 [http-nio-8080-exec-8] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:20:57.184 [http-nio-8080-exec-2] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:20:57.220 [http-nio-8080-exec-6] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:20:59.378 [http-nio-8080-exec-10] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@3113e88b (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.11:21:00.850 [http-nio-8080-exec-10] ERROR AiAdminAgentController - 查询AI智能体列表异常
org.mybatis.spring.MyBatisSystemException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiAgentDao.queryAiAgentList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:99)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy77.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy79.queryAiAgentList(Unknown Source)
	at com.onepiece.trigger.http.admin.AiAdminAgentController.queryAiAgentList(AiAdminAgentController.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiAgentDao.queryAiAgentList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 56 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:77)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:64)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 61 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: MainHikariPool - Connection is not available, request timed out after 30478ms (total=5, active=0, idle=5, waiting=0)
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:686)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:179)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:144)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 71 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2488)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:562)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:169)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:168)
	... 76 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:762)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:569)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2484)
	... 79 common frames omitted
25-08-12.11:21:33.044 [http-nio-8080-exec-9] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:21:33.063 [http-nio-8080-exec-1] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:21:34.147 [http-nio-8080-exec-3] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:21:34.157 [http-nio-8080-exec-10] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:22:51.889 [http-nio-8080-exec-7] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:22:51.918 [http-nio-8080-exec-3] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:22:53.114 [http-nio-8080-exec-5] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:22:53.127 [http-nio-8080-exec-4] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:23:58.219 [http-nio-8080-exec-6] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:24:06.911 [http-nio-8080-exec-1] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@15ed4ccd (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.11:24:16.934 [http-nio-8080-exec-1] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1c2876ec (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.11:25:01.268 [http-nio-8080-exec-10] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:32:54.281 [http-nio-8080-exec-7] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
25-08-12.11:34:48.306 [http-nio-8080-exec-3] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@49dcc009 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.11:34:48.876 [http-nio-8080-exec-8] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@78049b87 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.11:34:50.160 [http-nio-8080-exec-9] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@59f8d047 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.11:34:50.206 [http-nio-8080-exec-2] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@59d99e7b (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.11:34:58.352 [http-nio-8080-exec-3] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@50696959 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.11:39:39.848 [http-nio-8080-exec-9] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'aiAgentId' for method parameter type Long is not present]
25-08-12.12:26:43.731 [http-nio-8080-exec-3] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@675d35e6 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.12:26:53.762 [http-nio-8080-exec-3] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@310a5539 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.12:27:00.199 [http-nio-8080-exec-1] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7435c257 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.12:27:03.792 [http-nio-8080-exec-3] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@201a1d60 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.12:27:03.803 [http-nio-8080-exec-3] ERROR AiAdminRagOrderController - 查询RAG订单列表异常
org.mybatis.spring.MyBatisSystemException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_rag_order_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiRagOrderDao.queryRagOrderList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:99)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy77.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy88.queryRagOrderList(Unknown Source)
	at com.onepiece.trigger.http.admin.AiAdminRagOrderController.queryRagOrderList(AiAdminRagOrderController.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_rag_order_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiRagOrderDao.queryRagOrderList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 56 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:77)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:64)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 61 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: MainHikariPool - Connection is not available, request timed out after 30089ms (total=6, active=1, idle=5, waiting=0)
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:686)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:179)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:144)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 71 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2488)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:562)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:169)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:168)
	... 76 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:762)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:569)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2484)
	... 79 common frames omitted
25-08-12.12:27:10.217 [http-nio-8080-exec-1] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@55baf16f (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.12:28:19.200 [http-nio-8080-exec-4] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'files' is not present.]
25-08-12.12:29:04.811 [http-nio-8080-exec-5] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'files' is not present.]
25-08-12.12:29:25.271 [http-nio-8080-exec-6] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'files' is not present.]
25-08-12.12:34:08.320 [http-nio-8080-exec-7] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5cc1a545 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.12:34:18.342 [http-nio-8080-exec-7] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@d1d6764 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.12:34:28.350 [http-nio-8080-exec-7] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6c22f409 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.12:34:28.362 [http-nio-8080-exec-7] ERROR AiAdminAgentController - 查询AI智能体列表异常
org.mybatis.spring.MyBatisSystemException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiAgentDao.queryAiAgentList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:99)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy77.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy79.queryAiAgentList(Unknown Source)
	at com.onepiece.trigger.http.admin.AiAdminAgentController.queryAiAgentList(AiAdminAgentController.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiAgentDao.queryAiAgentList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 56 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:77)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:64)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 61 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: MainHikariPool - Connection is not available, request timed out after 30072ms (total=5, active=1, idle=4, waiting=0)
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:686)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:179)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:144)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 71 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2488)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:562)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:169)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:168)
	... 76 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:762)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:569)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2484)
	... 79 common frames omitted
25-08-12.12:34:34.390 [http-nio-8080-exec-10] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1bedc230 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.12:34:44.398 [http-nio-8080-exec-10] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1115a940 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.12:36:07.578 [http-nio-8080-exec-2] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'files' is not present.]
25-08-12.12:36:19.989 [http-nio-8080-exec-3] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'files' is not present.]
25-08-12.12:39:37.025 [http-nio-8080-exec-5] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'files' is not present.]
25-08-12.12:43:53.871 [http-nio-8080-exec-8] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'files' is not present.]
25-08-12.12:43:59.833 [http-nio-8080-exec-7] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'files' is not present.]
25-08-12.12:47:58.610 [http-nio-8080-exec-1] WARN  PostScriptTable        - No PostScript name data is provided for the font iconfont
25-08-12.12:47:59.200 [http-nio-8080-exec-1] WARN  RetryUtils             - Retry error. Retry count:1
org.springframework.ai.retry.NonTransientAiException: 401 - {"error":{"message":"该令牌状态不可用 (request id: 2025081212475921858198945747033)","type":"one_api_error"}}
	at org.springframework.ai.retry.RetryUtils$1.handleError(RetryUtils.java:63)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:58)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:826)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$readBody$4(DefaultRestClient.java:815)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:215)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$toEntityInternal$2(DefaultRestClient.java:770)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:574)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:535)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:677)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:809)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:769)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:765)
	at org.springframework.ai.openai.api.OpenAiApi.embeddings(OpenAiApi.java:273)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$1(OpenAiEmbeddingModel.java:168)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$3(OpenAiEmbeddingModel.java:168)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.call(OpenAiEmbeddingModel.java:166)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:67)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:49)
	at org.springframework.ai.embedding.AbstractEmbeddingModel.dimensions(AbstractEmbeddingModel.java:70)
	at org.springframework.ai.embedding.AbstractEmbeddingModel.dimensions(AbstractEmbeddingModel.java:95)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.embeddingDimensions(PgVectorStore.java:489)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.createObservationContextBuilder(PgVectorStore.java:506)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.add(AbstractObservationVectorStore.java:79)
	at org.springframework.ai.vectorstore.VectorStore.accept(VectorStore.java:56)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:46)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.12:47:59.205 [http-nio-8080-exec-1] WARN  PgVectorStore          - Failed to obtain the embedding dimensions from the embedding model and fall backs to default:1536
org.springframework.ai.retry.NonTransientAiException: 401 - {"error":{"message":"该令牌状态不可用 (request id: 2025081212475921858198945747033)","type":"one_api_error"}}
	at org.springframework.ai.retry.RetryUtils$1.handleError(RetryUtils.java:63)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:58)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:826)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$readBody$4(DefaultRestClient.java:815)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:215)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$toEntityInternal$2(DefaultRestClient.java:770)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:574)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:535)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:677)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:809)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:769)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:765)
	at org.springframework.ai.openai.api.OpenAiApi.embeddings(OpenAiApi.java:273)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$1(OpenAiEmbeddingModel.java:168)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$3(OpenAiEmbeddingModel.java:168)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.call(OpenAiEmbeddingModel.java:166)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:67)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:49)
	at org.springframework.ai.embedding.AbstractEmbeddingModel.dimensions(AbstractEmbeddingModel.java:70)
	at org.springframework.ai.embedding.AbstractEmbeddingModel.dimensions(AbstractEmbeddingModel.java:95)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.embeddingDimensions(PgVectorStore.java:489)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.createObservationContextBuilder(PgVectorStore.java:506)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.add(AbstractObservationVectorStore.java:79)
	at org.springframework.ai.vectorstore.VectorStore.accept(VectorStore.java:56)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:46)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.12:47:59.271 [http-nio-8080-exec-1] WARN  RetryUtils             - Retry error. Retry count:1
org.springframework.ai.retry.NonTransientAiException: 401 - {"error":{"message":"该令牌状态不可用 (request id: 2025081212475934905816918860016)","type":"one_api_error"}}
	at org.springframework.ai.retry.RetryUtils$1.handleError(RetryUtils.java:63)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:58)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:826)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$readBody$4(DefaultRestClient.java:815)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:215)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$toEntityInternal$2(DefaultRestClient.java:770)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:574)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:535)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:677)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:809)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:769)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:765)
	at org.springframework.ai.openai.api.OpenAiApi.embeddings(OpenAiApi.java:273)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$1(OpenAiEmbeddingModel.java:168)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$3(OpenAiEmbeddingModel.java:168)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.call(OpenAiEmbeddingModel.java:166)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:91)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.doAdd(PgVectorStore.java:255)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.lambda$add$1(AbstractObservationVectorStore.java:85)
	at io.micrometer.observation.Observation.observe(Observation.java:498)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.add(AbstractObservationVectorStore.java:85)
	at org.springframework.ai.vectorstore.VectorStore.accept(VectorStore.java:56)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:46)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.12:47:59.272 [http-nio-8080-exec-1] ERROR AiAgentController      - 上传知识库，异常 测试
org.springframework.ai.retry.NonTransientAiException: 401 - {"error":{"message":"该令牌状态不可用 (request id: 2025081212475934905816918860016)","type":"one_api_error"}}
	at org.springframework.ai.retry.RetryUtils$1.handleError(RetryUtils.java:63)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:58)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:826)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$readBody$4(DefaultRestClient.java:815)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:215)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$toEntityInternal$2(DefaultRestClient.java:770)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:574)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:535)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:677)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:809)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:769)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:765)
	at org.springframework.ai.openai.api.OpenAiApi.embeddings(OpenAiApi.java:273)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$1(OpenAiEmbeddingModel.java:168)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$3(OpenAiEmbeddingModel.java:168)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.call(OpenAiEmbeddingModel.java:166)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:91)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.doAdd(PgVectorStore.java:255)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.lambda$add$1(AbstractObservationVectorStore.java:85)
	at io.micrometer.observation.Observation.observe(Observation.java:498)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.add(AbstractObservationVectorStore.java:85)
	at org.springframework.ai.vectorstore.VectorStore.accept(VectorStore.java:56)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:46)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.12:53:08.235 [http-nio-8080-exec-10] WARN  PostScriptTable        - No PostScript name data is provided for the font iconfont
25-08-12.13:04:34.446 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=11m30s438ms685µs).
25-08-12.13:04:47.421 [http-nio-8080-exec-10] WARN  RetryUtils             - Retry error. Retry count:1
org.springframework.ai.retry.NonTransientAiException: 401 - {"error":{"message":"该令牌状态不可用 (request id: 2025081213044749046230327260761)","type":"one_api_error"}}
	at org.springframework.ai.retry.RetryUtils$1.handleError(RetryUtils.java:63)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:58)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:826)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$readBody$4(DefaultRestClient.java:815)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:215)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$toEntityInternal$2(DefaultRestClient.java:770)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:574)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:535)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:677)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:809)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:769)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:765)
	at org.springframework.ai.openai.api.OpenAiApi.embeddings(OpenAiApi.java:273)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$1(OpenAiEmbeddingModel.java:168)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$3(OpenAiEmbeddingModel.java:168)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.call(OpenAiEmbeddingModel.java:166)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:67)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:49)
	at org.springframework.ai.embedding.AbstractEmbeddingModel.dimensions(AbstractEmbeddingModel.java:70)
	at org.springframework.ai.embedding.AbstractEmbeddingModel.dimensions(AbstractEmbeddingModel.java:95)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.embeddingDimensions(PgVectorStore.java:489)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.createObservationContextBuilder(PgVectorStore.java:506)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.add(AbstractObservationVectorStore.java:79)
	at org.springframework.ai.vectorstore.VectorStore.accept(VectorStore.java:56)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:46)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.13:04:47.443 [http-nio-8080-exec-10] WARN  PgVectorStore          - Failed to obtain the embedding dimensions from the embedding model and fall backs to default:1536
org.springframework.ai.retry.NonTransientAiException: 401 - {"error":{"message":"该令牌状态不可用 (request id: 2025081213044749046230327260761)","type":"one_api_error"}}
	at org.springframework.ai.retry.RetryUtils$1.handleError(RetryUtils.java:63)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:58)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:826)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$readBody$4(DefaultRestClient.java:815)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:215)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$toEntityInternal$2(DefaultRestClient.java:770)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:574)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:535)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:677)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:809)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:769)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:765)
	at org.springframework.ai.openai.api.OpenAiApi.embeddings(OpenAiApi.java:273)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$1(OpenAiEmbeddingModel.java:168)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$3(OpenAiEmbeddingModel.java:168)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.call(OpenAiEmbeddingModel.java:166)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:67)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:49)
	at org.springframework.ai.embedding.AbstractEmbeddingModel.dimensions(AbstractEmbeddingModel.java:70)
	at org.springframework.ai.embedding.AbstractEmbeddingModel.dimensions(AbstractEmbeddingModel.java:95)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.embeddingDimensions(PgVectorStore.java:489)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.createObservationContextBuilder(PgVectorStore.java:506)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.add(AbstractObservationVectorStore.java:79)
	at org.springframework.ai.vectorstore.VectorStore.accept(VectorStore.java:56)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:46)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.13:04:48.794 [http-nio-8080-exec-10] WARN  RetryUtils             - Retry error. Retry count:1
org.springframework.ai.retry.NonTransientAiException: 401 - {"error":{"message":"该令牌状态不可用 (request id: 2025081213044887032284752896459)","type":"one_api_error"}}
	at org.springframework.ai.retry.RetryUtils$1.handleError(RetryUtils.java:63)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:58)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:826)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$readBody$4(DefaultRestClient.java:815)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:215)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$toEntityInternal$2(DefaultRestClient.java:770)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:574)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:535)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:677)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:809)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:769)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:765)
	at org.springframework.ai.openai.api.OpenAiApi.embeddings(OpenAiApi.java:273)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$1(OpenAiEmbeddingModel.java:168)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$3(OpenAiEmbeddingModel.java:168)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.call(OpenAiEmbeddingModel.java:166)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:91)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.doAdd(PgVectorStore.java:255)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.lambda$add$1(AbstractObservationVectorStore.java:85)
	at io.micrometer.observation.Observation.observe(Observation.java:498)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.add(AbstractObservationVectorStore.java:85)
	at org.springframework.ai.vectorstore.VectorStore.accept(VectorStore.java:56)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:46)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.13:20:24.830 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=15m50s385ms161µs500ns).
25-08-12.13:20:24.847 [http-nio-8080-exec-10] ERROR AiAgentController      - 上传知识库，异常 测试
org.springframework.ai.retry.NonTransientAiException: 401 - {"error":{"message":"该令牌状态不可用 (request id: 2025081213044887032284752896459)","type":"one_api_error"}}
	at org.springframework.ai.retry.RetryUtils$1.handleError(RetryUtils.java:63)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:58)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:826)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$readBody$4(DefaultRestClient.java:815)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:215)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$toEntityInternal$2(DefaultRestClient.java:770)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:574)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:535)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:677)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:809)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:769)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:765)
	at org.springframework.ai.openai.api.OpenAiApi.embeddings(OpenAiApi.java:273)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$1(OpenAiEmbeddingModel.java:168)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$3(OpenAiEmbeddingModel.java:168)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.call(OpenAiEmbeddingModel.java:166)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:91)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.doAdd(PgVectorStore.java:255)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.lambda$add$1(AbstractObservationVectorStore.java:85)
	at io.micrometer.observation.Observation.observe(Observation.java:498)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.add(AbstractObservationVectorStore.java:85)
	at org.springframework.ai.vectorstore.VectorStore.accept(VectorStore.java:56)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:46)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.13:20:35.406 [SpringApplicationShutdownHook] WARN  HikariPool             - Timed-out waiting for close connection executor to shutdown
25-08-12.13:21:47.518 [http-nio-8080-exec-1] WARN  PostScriptTable        - No PostScript name data is provided for the font iconfont
25-08-12.13:21:52.692 [http-nio-8080-exec-1] ERROR AiAgentController      - 上传知识库，异常 测试
org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:653)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:701)
	at org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:1049)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.insertOrUpdateBatch(PgVectorStore.java:275)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.lambda$doAdd$0(PgVectorStore.java:259)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.doAdd(PgVectorStore.java:259)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.lambda$add$1(AbstractObservationVectorStore.java:85)
	at io.micrometer.observation.Observation.observe(Observation.java:498)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.add(AbstractObservationVectorStore.java:85)
	at org.springframework.ai.vectorstore.VectorStore.accept(VectorStore.java:56)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:46)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.postgresql.util.PSQLException: FATAL: database "springai" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.readStartupMessages(QueryExecutorImpl.java:2845)
	at org.postgresql.core.v3.QueryExecutorImpl.<init>(QueryExecutorImpl.java:176)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:323)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 61 common frames omitted
25-08-12.13:26:36.532 [http-nio-8080-exec-2] WARN  PostScriptTable        - No PostScript name data is provided for the font iconfont
25-08-12.13:26:38.708 [http-nio-8080-exec-2] ERROR AiAgentController      - 上传知识库，异常 测试
org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [INSERT INTO public.vector_store_openai (id, content, metadata, embedding) VALUES (?, ?, ?::jsonb, ?) ON CONFLICT (id) DO UPDATE SET content = ? , metadata = ?::jsonb , embedding = ? ]
	at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:112)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:116)
	at org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1556)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:677)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:701)
	at org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:1049)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.insertOrUpdateBatch(PgVectorStore.java:275)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.lambda$doAdd$0(PgVectorStore.java:259)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.doAdd(PgVectorStore.java:259)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.lambda$add$1(AbstractObservationVectorStore.java:85)
	at io.micrometer.observation.Observation.observe(Observation.java:498)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.add(AbstractObservationVectorStore.java:85)
	at org.springframework.ai.vectorstore.VectorStore.accept(VectorStore.java:56)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:46)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.sql.BatchUpdateException: Batch entry 0 INSERT INTO public.vector_store_openai (id, content, metadata, embedding) VALUES (('bf7de97b-eec2-46b1-9775-42c6de6cd582'::uuid), ('教育经历

安徽农业大学-数据科学与大数据技术
本科
信息与人工智能学院 2020年09月 -
2024年06月

专业技能

Java：熟悉Java基础语法，集合、多线程及并发工具，具备良好的面向对象设计能力，理解JVM内存模型与性能调优方法。

数据库：熟悉MySQL常用SQL语句、索引优化、事务与隔离级别；了解PostgreSQL向量索引，掌握数据库分库分表与滑动库存策略。

中间件：熟悉Redis数据结构，掌握缓存穿透、雪崩和击穿问题解决方案，理解AOF/RDB机制，掌握RabbitMQ消息机制及主流程解耦。

数据结构与算法：熟悉栈、队列、树、图、查找和排序等常用的数据结构与算法，能解决实际问题场景，如动态规划。

框架：熟悉SpringBoot生态，了解Spring Cloud组件、服务注册与配置中心（如Nacos），具备分布式服务开发与治理经验。

AI应用集成：熟练使用Spring AI集成大语言模型（OpenAI、Qwen、Ollama），掌握模型上下文管理、Prompt模板配置、RAG（检索增
强生成）知识问答流程。

工作与实习经历

上海逸舟信息科技有限公司-后端开发工程师 2024年05月 -
2025年07月

主导抽奖系统 GiftDraw 的后端架构设计与核心模块开发，基于 DDD 建模，结合策略/模板/工厂等设计模式，构建高可维护的业务框架。

参与系统日常运维与功能优化，定位并解决线上问题，持续提升系统稳定性与用户体验，配合测试与产品协作迭代版本，保障高质量交付。

跟进主流 AI 大模型(如Qwen\GPT\Claude 等)能力与兼容性评估，参与模型选型与推理性能对比，结合业务需求持续优化模型集成方案。

项目经历

GiftDraw企业级抽奖管理系统 2024年05月 -
2025年01月

项目介绍：为上海电网打造一套覆盖员工抽奖、积分发放与福利兑换的企业级激励系统，基于DDD设计系统架构，采用策略/模板/工厂等设计模'), ('{"source":"项铭钊简历V1 (2).pdf","knowledge":"测试知识库"}')::jsonb, ('[-0.012644656,-0.030777631,-3.7244568E-4,-0.03381773,-0.039117724,0.024455303,-0.025692865,0.007923088,-0.0171779,-0.034436513,0.021791855,-0.0030232836,0.00958438,0.00873692,-0.0062550693,0.019209117,-0.0010668929,-0.002202726,0.008434255,-0.017729422,-0.01149453,0.0029980615,-0.013149098,-0.0034806435,0.0040355287,-0.007499357,0.027266722,-0.025908094,-0.0015704932,0.0013888944,0.039736506,-0.008104687,-0.015980693,-0.004704754,0.009671817,-0.023580939,-0.005784258,0.016559118,0.033091336,0.012974225,0.0351091,0.022787284,0.010048467,-0.008097961,0.018455818,0.0248185,-0.021697693,-0.033548694,-8.651164E-4,0.01786394,-0.004973789,0.008831082,-0.0076002455,-0.0027979666,-0.012489961,-0.006446757,-0.007539713,0.036050722,-0.018940082,-0.03249946,0.0017554549,0.019020792,-0.02298906,0.0017941288,-0.023271548,1.9011123E-4,-0.02405175,-0.013007854,0.0040994245,0.0025827384,0.033010624,0.013424858,-0.0060835592,0.004738383,0.041027874,-0.0014401793,-0.018415462,0.021509368,-0.0206081,-0.009470041,0.0019387353,-0.032929912,-0.00778857,0.018603787,0.017850488,0.057681154,-0.017837036,0.020594647,-0.0054446007,-0.021159621,-0.0047821016,-0.0010988408,0.031100474,0.014030187,-0.018523077,0.017191352,0.0030400981,0.013626635,-0.020554293,-0.026930427,-0.004916619,-0.009261538,-0.035916205,0.002152282,-0.036696408,6.34755E-4,-0.007754941,0.027495401,0.026580682,-0.0031292161,-0.014164706,0.032338034,-4.4390815E-4,-0.04702736,-0.03709996,-0.029513165,0.013606457,-0.008030702,-0.0031493937,-0.024522562,-0.002749204,0.039117724,-0.0036756939,-0.022760382,0.020110384,0.022477895,-0.008972325,-0.0014578347,0.03381773,-0.0074791797,-0.011736662,0.0019925423,0.00836027,-0.0014334534,-0.026674844,-0.010041741,-0.03107357,-0.018361656,-0.017689068,-0.02152282,0.004200313,0.041054778,0.005777532,-0.021738047,-0.015240846,0.0049838778,0.009860141,0.022410635,0.027576113,0.025410378,0.006493838,-0.035700977,-0.015967242,0.022276118,0.019881705,-0.015187039,0.015375364,0.0038303894,-0.005424423,-9.542344E-4,0.0078087477,-0.0055253115,-0.0049401596,-0.0028013294,0.0022968883,0.030723825,-0.006053293,-0.008582224,0.018469268,-0.009752528,-0.00587842,0.018590335,-0.030670017,0.0022397183,0.03440961,0.027535757,0.005333624,-0.008050879,-0.029916719,-0.011373465,0.01084212,-0.006836858,0.020500485,0.0069680125,-0.010108999,-0.0024667168,7.9281325E-4,0.0037564046,-0.009873593,-0.024724338,0.027603015,0.021361398,-0.004708117,-0.018993888,-0.59575164,-0.014958359,0.0013325652,-0.014756583,0.013418132,-0.01206623,-0.004291112,0.0066485335,0.01526775,-0.047296394,-8.436777E-4,0.011407094,0.011797195,0.0023204288,8.4325735E-4,-0.024347689,0.009288441,-0.008743646,0.0047249314,0.013169275,-0.0049502486,0.031315703,-0.0013930982,-0.005481593,0.0077280374,0.0076002455,0.013337422,-0.00536389,4.9445734E-5,0.010801765,-0.037907064,0.011965343,0.032257326,-0.0022481258,0.052408066,0.014944907,0.0015738562,0.031504028,0.005481593,0.031261895,-0.005360527,-0.014823842,0.005481593,0.018186782,-0.0024213172,0.02168424,0.008676386,2.854296E-4,0.00582125,-0.0013804871,0.0050511365,-9.337415E-5,-2.8059536E-4,9.113569E-4,0.007405195,-0.008044153,0.008629305,-0.034759354,0.025329668,-0.008528417,0.019074598,0.02602916,-0.020527389,-0.008972325,0.0013241578,0.022572057,-0.0053975196,-7.104212E-4,0.028383218,-0.008420803,0.014635517,0.021159621,0.028813675,0.0031023126,0.020782972,0.008979051,0.027347432,-0.0035714428,-0.01133311,0.023231193,3.570497E-5,-0.0018294397,0.0046005026,-0.011393642,-0.0034436511,-0.005044411,-0.0028046924,-0.008622579,7.1798783E-4,-0.002792922,0.019814445,0.011286029,0.0048258197,-0.0041599576,0.0128195295,0.03115428,-0.0137477005,-0.0046677613,-0.022074342,-0.008212301,-0.014568258,-0.00889834,0.010795039,0.010875749,0.03747661,0.015482978,-0.015617495,-0.00950367,0.023217741,-0.0025861012,-0.027576113,-0.006776325,0.0039817216,0.007748215,0.008225753,-0.027737534,-0.006123915,0.0010744595,0.004375186,0.012624479,0.020971296,0.010431842,0.018523077,-7.688523E-4,-0.0144068375,0.029136516,-0.021590078,-0.008037427,0.0070419973,-0.001031582,0.03419438,-0.011736662,0.019881705,-0.010115725,0.026163677,-0.010404938,0.0043180156,7.5624126E-4,-0.018132975,-0.00790291,-0.008710016,-2.7407965E-4,-0.008770549,-0.017608356,1.6173642E-4,0.0016226188,-0.0032990447,0.021132719,0.024011396,-0.023163935,-0.0070285457,-4.558361E-5,-0.0048863525,0.026056062,0.007802022,0.010983364,0.0023809618,-0.0070285457,-0.013989832,-0.017877392,-5.7380175E-4,-0.011803921,-0.020258354,0.017312419,-0.018617239,-0.017245159,0.012261281,0.0069680125,-0.05404918,-0.015832724,0.003917826,-0.008104687,-0.009261538,0.013155824,-0.010929557,-0.013337422,-0.030400982,0.0068099545,-2.2555347E-5,-0.008716742,0.011097704,0.013868767,0.0031762973,-0.01961267,0.011783743,0.016357342,-0.003793397,0.020809876,-0.001231677,0.010929557,-0.026540326,0.04040909,-0.01771597,0.010452019,-0.014124351,0.033790827,0.005703547,-0.009786157,0.00832664,0.025275862,0.009530573,0.027898954,-0.007748215,0.02511444,0.0033024077,-0.012705189,0.0060869223,0.009120295,0.020702261,0.011911536,0.006292062,-0.013774605,-0.016101759,-0.0046677613,-0.007075627,0.007176515,-0.014447193,0.0048190937,-0.014931456,-0.007459002,-0.01892663,-0.0070352717,0.0058044354,0.0014897827,0.013545925,0.012570672,-0.018132975,0.015684756,0.003672331,-0.033844635,0.0116425,3.9850845E-4,-0.016115211,0.0022397183,-0.0022935255,7.1798783E-4,0.017446935,-0.030320272,0.025248958,0.007452276,-0.012651382,0.012563946,0.026580682,-0.016962672,0.010889201,-3.4806435E-4,0.031261895,0.010546181,-0.015899982,0.0068738502,-0.01657257,0.009765979,-0.027952762,-0.020944394,0.01332397,-0.03521671,-0.023258097,0.0069747386,0.027051494,0.029028902,0.0040557063,0.028732963,0.003998536,0.0033780737,0.02413246,-0.007506083,-0.017500743,-0.014635517,-0.010943009,-0.009443137,0.02037942,-0.034705546,0.0013628317,-3.3629406E-4,0.019451248,0.0010214932,0.0116425,-0.014850745,-0.0010811854,0.014891101,-0.031127378,-0.012543768,0.004580325,0.028948192,0.011951891,1.5501054E-4,4.1637407E-4,0.014514451,-0.016007597,-0.015106329,-0.0056127477,-0.014689324,0.020271806,0.010404938,-0.021872565,-0.0075935195,0.035996914,-0.0048224567,-0.05106289,-0.012368895,0.0017235071,-0.010673973,-0.03849894,-0.024159364,0.026970783,-0.0018462543,-0.0043920004,0.0027828333,0.01435303,-0.003961544,-0.00259619,-0.0267152,0.004015351,-6.337041E-5,-0.0037429528,0.024159364,-0.008891615,-0.017298967,0.032741588,0.020083481,2.0374691E-5,-0.00462068,-0.030643115,0.005323535,0.044363912,0.027845148,-0.010754684,0.0056800065,-0.010546181,-0.0110708,-0.02550454,-0.013465214,0.010236791,0.019074598,0.004805642,-0.0044996142,0.017931199,-0.003189749,-0.0071361596,-0.0021892742,0.018025361,-0.031315703,0.0030148763,0.0019959053,-0.015684756,-0.001958913,0.008044153,0.01526775,0.025208602,0.010956461,0.03352179,0.024858857,0.005528674,-0.019437796,-0.012967499,-0.006614904,0.009402782,0.007169789,-0.0038875593,0.04304564,-0.009557477,0.014339578,0.0069814646,0.007849103,0.031719256,0.04024767,-0.008562046,-0.02962078,0.011030445,-0.022558605,0.009739076,0.012281459,-0.029486263,-0.013512295,0.013418132,0.022074342,-0.024831953,-0.014218513,0.0071428856,0.0070890784,-0.0062617953,-0.009523847,-0.014675872,-0.031127378,-0.019451248,-0.030400982,-0.003793397,-0.017958103,-0.02145556,-0.0090059545,-0.03161164,-0.0062382547,-0.011797195,0.0077145854,-0.020782972,-0.0051385732,-0.023110127,-0.007882733,-0.010182984,-0.002170778,0.035082195,0.0019118317,-0.016612926,0.016195921,0.004005262,-0.0039043739,0.009981208,-0.009712173,-0.0073043066,0.009100117,-0.01587308,-0.005125121,0.01503907,-0.01301458,0.008750372,-0.011911536,0.013344148,0.014151254,0.0056732805,0.0015637673,0.02335226,0.01916876,-0.007842378,-0.017689068,9.7609346E-4,-0.03922534,-0.012711915,-0.019343633,0.023379162,-0.005155388,0.006900754,-0.002685308,-0.015469526,-0.020621551,0.017568002,0.0064131278,0.035835493,-0.0118711805,0.02717256,0.003371348,-0.0042238533,0.013216356,-0.0027172558,-0.0058481535,0.007358114,-0.015509882,0.024939567,0.043691322,-0.032903012,0.034436513,0.0040422543,0.007633875,-0.02932484,0.0034436511,0.008797453,0.010976638,-0.0077616666,-0.015294653,-0.0067258812,-0.0015789006,-0.0068603987,0.019316731,0.004180135,-0.028114183,-0.009577654,-0.027212914,0.008770549,-0.023298452,0.055636488,-0.029378649,-0.018065717,0.0018563431,-0.005750628,0.021495916,0.0013476984,-0.013687168,0.017366225,0.0031477124,-0.025437282,-0.029997429,-0.016303536,-0.009853416,0.023702005,0.021415206,0.029997429,-0.004741746,0.04557457,0.013350874,-0.010310776,4.5567844E-4,0.01969338,0.020500485,-0.01580582,0.0096381875,0.009073214,0.015281201,-0.013384503,-0.013021306,0.0053067203,8.995866E-4,-0.008306463,-0.02305632,-0.015173588,-0.05870349,0.008575498,0.0077751186,8.2980556E-4,0.0035310877,-0.018940082,0.01255722,0.050444108,0.012604301,0.015065974,-0.004862812,0.014420289,-0.017702518,0.008023976,0.0021304227,0.0071966927,-0.018603787,-0.012456331,-0.023311904,-0.0038270263,0.038256813,0.016922317,0.025141343,0.021939823,-0.012913692,0.0023355621,0.0014595162,-0.00904631,-0.010707603,-0.014003284,-0.035996914,1.2463899E-4,-0.023661649,-0.012779174,-0.043637518,0.021428658,0.014083995,-0.0022111335,0.028759867,-0.016801251,0.003618524,0.0026752192,-0.0020513937,0.032553263,-0.0027340706,0.018523077,0.055017706,0.0038337521,-0.030589307,-0.038310617,0.0018260767,-5.637129E-4,0.02511444,0.049583197,-0.0086965645,-0.0067729624,0.00950367,0.011090978,0.0012787582,-0.020554293,0.0011576923,0.007290855,-0.004200313,-0.0049637,-0.009577654,-0.0052394615,0.011682855,-0.022558605,-0.021469012,-0.023500228,-0.020433227,0.0059019607,0.009301893,-0.0014073906,0.008575498,0.016290084,-0.0073917434,0.011696307,-0.005367253,0.0030468241,0.019209117,-0.012651382,0.025813932,-0.0030014245,0.0080777835,0.0021052007,0.01588653,-0.003732864,0.005145299,-0.011467627,0.043987263,-0.01587308,-0.010135903,-0.013505569,-0.0024061839,0.026849717,-0.010768136,-0.004785464,-0.008037427,-0.023876878,0.007849103,-0.010687425,0.005777532,0.010445293,0.0048829895,-0.0043146526,-0.019962415,0.013492118,-0.0020144014,-0.0018243953,-0.018819015,-0.010768136,0.008710016,-0.033629406,-0.0137544265,-6.6291966E-4,0.0052966313,0.008965599,0.009342249,-0.019182213,0.013216356,0.013404681,-0.019155309,-0.026688296,-0.0021220155,-0.01665328,-0.014648969,0.020043125,-0.016047953,-0.0058077984,-0.018509625,0.009086666,0.013922574,-0.032929912,-0.002564242,0.064407036,-0.0011930031,0.0128195295,0.0013863723,-0.009416234,0.005501771,-0.025316216,-0.016518764,0.0021472375,-0.026378905,0.040355287,0.0011677811,0.01786394,3.7013364E-4,-0.045144115,-0.07931159,-7.7263557E-4,0.012389073,-0.031799965,-0.020043125,-0.04067813,-0.01290024,-0.01206623,0.01481039,-0.014366481,0.0036387017,0.038203005,-0.006665348,0.011353287,0.011212043,0.016976124,0.010263694,-0.021213429,-0.006914206,-0.042615183,0.010559633,-0.021065459,0.008905066,0.012489961,-0.010182984,0.0017823585,-0.018334752,-0.017379677,-0.02259896,-0.0209982,0.027132204,-0.0065846373,-4.2856473E-4,0.03123499,-0.007122708,-0.008145042,0.01626318,-0.012933869,0.0028669068,-0.008494788,-0.026177129,0.012866611,-9.453016E-5,-0.046166446,-0.02046013,-0.0017209848,-0.008723468,-0.004469348,0.014796939,-0.014823842,0.002602916,0.008884889,-0.010438567,-0.025154795,0.0039850846,0.020971296,-0.019437796,-0.017568002,-0.009268264,-0.022612412,-0.009624735,-0.007997072,0.012785899,-0.016370794,0.010519278,-0.013088564,-0.012658108,-0.0137611525,0.0029257583,2.486474E-4,0.013048209,-0.0054378747,0.03494768,-0.008884889,-0.006170996,-0.0054546897,-0.005599296,-0.03228423,0.0046475837,0.0018176694,-0.0030115133,0.031046666,-0.011703033,0.021321043,0.00311072,-0.009147198,-0.016935768,-0.016357342,-0.035754785,0.016303536,0.020621551,0.016532216,-0.012301637,0.0021119267,-0.017366225,-0.01526775,-0.011077526,0.006369409,-0.005081403,-0.024858857,0.023621295,0.0039380034,-0.0034436511,-0.02068881,0.016774347,0.0023019328,-0.0021354672,0.2924951,-8.449388E-4,0.0071092565,-0.012698463,0.018590335,0.03427509,0.028732963,0.020043125,-0.008642757,0.02237028,-0.0056463773,-0.008192123,-0.0055757556,-0.00519238,5.6034996E-4,-0.036050722,-0.022800736,-0.020016221,-0.011965343,-0.03266088,0.019330183,0.0027794703,-0.0063626836,-0.03352179,0.005653103,-0.0046610357,0.0056228368,-0.0016991257,0.0054412377,0.010909379,-0.02571977,0.012563946,0.018819015,3.5836335E-4,-0.013404681,-0.0105932625,-0.005074677,-0.0115416115,0.013788057,0.0045635104,0.018724853,-0.013512295,0.007129434,-0.031719256,0.0069343834,0.03473245,-0.004576962,-0.0064669345,-0.010916105,0.015604044,-0.006608178,0.0029593876,0.010209887,0.022020534,0.007869281,0.02932484,0.032929912,6.1117503E-6,-0.0015242528,-0.001501553,-0.012718641,0.014904552,0.010055192,0.017298967,0.0045971395,-0.008857985,-0.011689581,0.013216356,0.009523847,-0.010707603,-0.010949735,-0.030320272,-0.017164448,-0.00832664,-0.05762735,-0.044148684,0.016586022,0.020635003,0.0024667168,0.04183498,-0.0025289312,-0.02297561,0.0020749343,-0.02206089,-0.01503907,-0.028867481,0.03061621,-0.0071025304,-0.025988804,-0.016518764,-0.010916105,-0.0031544382,-0.0090059545,-0.004953611,0.018576883,0.009570928,0.030562403,0.028652253,-0.010768136,-0.013465214,-0.025679413,0.053753242,0.023823071,5.1705213E-4,-0.029916719,0.0027155746,-0.015133233,0.00564974,0.014460645,-0.014635517,-0.016680185,-0.051869996,-0.0040994245,0.004355008,-3.4301993E-4,0.016518764,0.0071361596,-0.009631461,0.006628356,-0.007532987,0.023190837,-0.04379894,-0.007694408,0.023863425,-0.020406323,-0.027683726,-0.019410893,0.0030350538,-0.024145912,-0.013216356,0.03685783,-0.033710115,0.004170046,-0.011117881,-0.007405195,0.012732093,-0.011575242,0.019451248,-0.0115416115,-0.0099677555,0.013707345,-0.019034244,0.0071496116,-0.0024902574,-0.0027811518,-0.0051116697,0.016464956,0.0030720462,0.0023540584,-0.02924413,-0.010082096,0.009691995,0.0063458686,-0.0035781688,0.024630176,-0.0052764537,-0.047457818,-0.0036958717,-0.00801725,0.011682855,-0.043449193,-0.014151254,0.027683726,-0.011851002,-0.020648455,-0.007122708,-0.1709988,0.0134383105,0.022397185,-0.025665961,0.036669504,0.029378649,0.0059725824,0.0031762973,-0.017568002,0.0014099128,0.020675357,-0.0066518965,-0.009369153,-7.516172E-4,0.003364622,0.010916105,-0.02633855,0.01141382,0.04040909,0.0059355902,0.009523847,-0.011265851,-0.010088822,0.002834959,0.008797453,0.005653103,-0.0051083067,0.007573342,0.01198552,-0.007923088,-0.016599474,-0.015375364,0.009537299,-0.015442623,0.01815988,0.007169789,-0.00253902,-0.0049401596,-0.027898954,0.030858342,0.03007814,0.03594311,0.02046013,0.014231964,-0.0023641472,0.027508853,0.008272834,-0.018953532,0.025235506,-0.004751835,0.027603015,-0.029647684,0.021643884,-0.0053975196,0.0069747386,0.02266622,-0.0075531644,-0.0077683926,0.0033999328,0.0080576055,0.024939567,-0.007344662,0.019074598,0.010337679,0.014205061,-0.006342506,-0.026580682,0.03298372,-0.0167878,0.00299638,5.8809423E-4,-0.022867996,0.0015040751,0.009174102,0.02580048,0.013176001,-0.011016993,0.023311904,0.012220926,-0.020043125,-0.007687682,9.836601E-4,-0.014689324,-0.009853416,-0.024683984,-0.0064299423,-0.008521691,-0.019141857,0.03962889,-0.008575498,0.016088307,-0.028571542,-0.024024848,0.0035983464,0.014904552,0.01232854,0.0021623708,-0.007176515,0.008878163,0.0053874305,0.010485648,-0.011615597,3.7685953E-4,6.9066393E-4,-0.0043247417,-0.01503907,0.0134517625,0.01557714,0.038445137,-0.011655952,-0.0121738445,0.013102016,0.009940852,0.016505312,0.002666812,0.032633975,-0.018428914,-0.007573342,0.0056026587,-0.014258868,0.0112389475,0.008595676,-0.018455818,0.012880062,0.0024145914,-0.0020194459,-0.06069435,-0.03174616,0.042238533,0.031557836,0.0054446007,0.014326126,-0.0061508184,0.021778403,-0.054694865,0.033333465,0.0039413664,-0.0312888,-0.0083871735,0.017823584,0.02015074,-3.1947935E-4,0.0046475837,-3.8757888E-4,-0.008239204,0.028679157,-0.011111155,-0.024226623,0.017379677,-0.0043112896,-0.0040422543,0.011824098,-0.013525747,0.02419972,0.017756326,-2.3987224E-5,0.030562403,-0.017204804,0.015052522,-0.0112187695,-0.017581454,-0.028948192,-0.036023818,-0.02550454,0.035297424,0.0013048209,0.0059692194,-0.0053403494,0.019935511,-0.01778323,0.0047619236,-0.0031124013,-0.0013577873,0.0358893,0.010142629,-0.019141857,-0.027522305,0.017756326,-0.016760895,0.022020534,0.019908607,5.498408E-4,0.03559336,0.0075598904,-0.0040893354,0.0144068375,0.019962415,-0.007929814,-0.043449193,0.011797195,0.019128406,0.0061474554,-0.01324326,-0.003897648,-0.001812625,-0.009483492,-0.006170996,0.0046408577,-0.025208602,-0.0027374336,-0.032903012,-0.0025373385,-0.0030350538,-0.011945165,-3.470134E-4,-0.0014460644,-0.012550494,-0.017527645,0.0062584323,-0.013909122,0.03771874,0.014312675,-0.0047652866,-0.017352773,-6.8772136E-4,-0.014891101,-0.025531445,0.014514451,0.024791598,-0.03214971,-0.009718898,0.010620167,0.023298452,-0.004634132,-0.017850488,0.02449566,-9.61801E-4,-0.0305355,-0.09722934,0.016922317,4.098584E-4,-0.007465728,0.019047694,-0.006776325,0.025370024,0.0016217781,-0.01587308,-0.013330696,-0.026513424,-0.021966727,-0.008151768,0.0053403494,-0.017191352,-0.011164962,0.013801508,0.007949991,0.00559257,0.01381496,8.4788137E-4,0.0024330874,0.017729422,-0.0048964415,-0.007519535,0.0033192222,-0.01938399,9.954304E-4,-0.011750114,0.008629305,0.006204625,0.004869538,-0.005760717,0.012348718,-0.015321557,-0.036615696,0.02037942,0.022181956,0.009463315,0.05205832,-0.024845405,-0.025827384,0.012308362,-0.02145556,-0.012429428,0.005047774,0.0020951119,0.023715457,0.024616724,-0.03352179,0.008198849,0.009133747,-0.012288185,-0.0171779,0.017406581,-0.023540584,0.005713636,0.013283615,-0.014326126,0.011205317,0.028006569,0.011803921,-8.8949775E-4,-0.021442108,0.0029089435,-0.007923088,-0.013566102,0.0075531644,0.012913692,0.006786414,-0.018523077,-0.018213686,1.9263344E-4,0.016774347,-0.0183213,-0.0047282944,0.019262923,0.010438567,0.0019168761,0.032849204,-0.007344662,0.008730194,0.022652768,-3.2935798E-4,0.018267494,0.028437026,-0.019706832,-0.0065980894,-0.0058414275,0.0047182054,0.013962929,0.01301458,-0.015523333,-0.0058077984,-0.009396056,3.709744E-4,0.0021573263,-0.013734249,0.027818244,0.024872309,0.016209373,0.006120552,0.018442366,-0.01709719,-0.037288286,0.014191609,-0.03136951,-0.012140215,0.016895413,-0.0028114184,0.019020792,0.002560879,-0.014003284,0.0090126805,-0.007418647,0.00984669,-0.010869023,-0.043987263,-0.03419438,0.03809539,0.014998714,0.04283041,-0.0069680125,-0.012772448,0.02779134,0.021065459,0.015698206,-0.028356314,0.006503927,-0.018469268,-0.026230937,-0.0056396513,-0.010707603,-0.025733221,-0.02787205,-3.7749007E-4,-0.024145912,-0.0023002513,0.006369409,0.04952939,0.019061146,-0.008212301,0.021092363,-0.0051049436,-0.024858857,-0.006712429,-0.0024700798,-1.0346297E-4,-0.049744617,0.029566973,-0.024441851,-0.017245159,-0.027011137,-0.023015965,0.002453265,-0.015200491,0.008454433,-0.015980693,0.035324328,0.014944907,-0.007748215,0.011077526,0.026580682,-0.050255783,-0.008952147,0.03182687,0.0052697277,0.012274733,-0.01663983,0.023150483,0.012503413,-0.04366442,-0.012664834,0.0069411094,-0.015846176,-0.025988804,-0.010102273,0.020217998,0.011474353,-0.028759867,-0.0061440924,-0.027845148,-0.018603787,0.013209631,-0.012254556,-0.021213429,-0.010263694,-0.0031594827]')) ON CONFLICT (id) DO UPDATE SET content = ('教育经历

安徽农业大学-数据科学与大数据技术
本科
信息与人工智能学院 2020年09月 -
2024年06月

专业技能

Java：熟悉Java基础语法，集合、多线程及并发工具，具备良好的面向对象设计能力，理解JVM内存模型与性能调优方法。

数据库：熟悉MySQL常用SQL语句、索引优化、事务与隔离级别；了解PostgreSQL向量索引，掌握数据库分库分表与滑动库存策略。

中间件：熟悉Redis数据结构，掌握缓存穿透、雪崩和击穿问题解决方案，理解AOF/RDB机制，掌握RabbitMQ消息机制及主流程解耦。

数据结构与算法：熟悉栈、队列、树、图、查找和排序等常用的数据结构与算法，能解决实际问题场景，如动态规划。

框架：熟悉SpringBoot生态，了解Spring Cloud组件、服务注册与配置中心（如Nacos），具备分布式服务开发与治理经验。

AI应用集成：熟练使用Spring AI集成大语言模型（OpenAI、Qwen、Ollama），掌握模型上下文管理、Prompt模板配置、RAG（检索增
强生成）知识问答流程。

工作与实习经历

上海逸舟信息科技有限公司-后端开发工程师 2024年05月 -
2025年07月

主导抽奖系统 GiftDraw 的后端架构设计与核心模块开发，基于 DDD 建模，结合策略/模板/工厂等设计模式，构建高可维护的业务框架。

参与系统日常运维与功能优化，定位并解决线上问题，持续提升系统稳定性与用户体验，配合测试与产品协作迭代版本，保障高质量交付。

跟进主流 AI 大模型(如Qwen\GPT\Claude 等)能力与兼容性评估，参与模型选型与推理性能对比，结合业务需求持续优化模型集成方案。

项目经历

GiftDraw企业级抽奖管理系统 2024年05月 -
2025年01月

项目介绍：为上海电网打造一套覆盖员工抽奖、积分发放与福利兑换的企业级激励系统，基于DDD设计系统架构，采用策略/模板/工厂等设计模') , metadata = ('{"source":"项铭钊简历V1 (2).pdf","knowledge":"测试知识库"}')::jsonb , embedding = ('[-0.012644656,-0.030777631,-3.7244568E-4,-0.03381773,-0.039117724,0.024455303,-0.025692865,0.007923088,-0.0171779,-0.034436513,0.021791855,-0.0030232836,0.00958438,0.00873692,-0.0062550693,0.019209117,-0.0010668929,-0.002202726,0.008434255,-0.017729422,-0.01149453,0.0029980615,-0.013149098,-0.0034806435,0.0040355287,-0.007499357,0.027266722,-0.025908094,-0.0015704932,0.0013888944,0.039736506,-0.008104687,-0.015980693,-0.004704754,0.009671817,-0.023580939,-0.005784258,0.016559118,0.033091336,0.012974225,0.0351091,0.022787284,0.010048467,-0.008097961,0.018455818,0.0248185,-0.021697693,-0.033548694,-8.651164E-4,0.01786394,-0.004973789,0.008831082,-0.0076002455,-0.0027979666,-0.012489961,-0.006446757,-0.007539713,0.036050722,-0.018940082,-0.03249946,0.0017554549,0.019020792,-0.02298906,0.0017941288,-0.023271548,1.9011123E-4,-0.02405175,-0.013007854,0.0040994245,0.0025827384,0.033010624,0.013424858,-0.0060835592,0.004738383,0.041027874,-0.0014401793,-0.018415462,0.021509368,-0.0206081,-0.009470041,0.0019387353,-0.032929912,-0.00778857,0.018603787,0.017850488,0.057681154,-0.017837036,0.020594647,-0.0054446007,-0.021159621,-0.0047821016,-0.0010988408,0.031100474,0.014030187,-0.018523077,0.017191352,0.0030400981,0.013626635,-0.020554293,-0.026930427,-0.004916619,-0.009261538,-0.035916205,0.002152282,-0.036696408,6.34755E-4,-0.007754941,0.027495401,0.026580682,-0.0031292161,-0.014164706,0.032338034,-4.4390815E-4,-0.04702736,-0.03709996,-0.029513165,0.013606457,-0.008030702,-0.0031493937,-0.024522562,-0.002749204,0.039117724,-0.0036756939,-0.022760382,0.020110384,0.022477895,-0.008972325,-0.0014578347,0.03381773,-0.0074791797,-0.011736662,0.0019925423,0.00836027,-0.0014334534,-0.026674844,-0.010041741,-0.03107357,-0.018361656,-0.017689068,-0.02152282,0.004200313,0.041054778,0.005777532,-0.021738047,-0.015240846,0.0049838778,0.009860141,0.022410635,0.027576113,0.025410378,0.006493838,-0.035700977,-0.015967242,0.022276118,0.019881705,-0.015187039,0.015375364,0.0038303894,-0.005424423,-9.542344E-4,0.0078087477,-0.0055253115,-0.0049401596,-0.0028013294,0.0022968883,0.030723825,-0.006053293,-0.008582224,0.018469268,-0.009752528,-0.00587842,0.018590335,-0.030670017,0.0022397183,0.03440961,0.027535757,0.005333624,-0.008050879,-0.029916719,-0.011373465,0.01084212,-0.006836858,0.020500485,0.0069680125,-0.010108999,-0.0024667168,7.9281325E-4,0.0037564046,-0.009873593,-0.024724338,0.027603015,0.021361398,-0.004708117,-0.018993888,-0.59575164,-0.014958359,0.0013325652,-0.014756583,0.013418132,-0.01206623,-0.004291112,0.0066485335,0.01526775,-0.047296394,-8.436777E-4,0.011407094,0.011797195,0.0023204288,8.4325735E-4,-0.024347689,0.009288441,-0.008743646,0.0047249314,0.013169275,-0.0049502486,0.031315703,-0.0013930982,-0.005481593,0.0077280374,0.0076002455,0.013337422,-0.00536389,4.9445734E-5,0.010801765,-0.037907064,0.011965343,0.032257326,-0.0022481258,0.052408066,0.014944907,0.0015738562,0.031504028,0.005481593,0.031261895,-0.005360527,-0.014823842,0.005481593,0.018186782,-0.0024213172,0.02168424,0.008676386,2.854296E-4,0.00582125,-0.0013804871,0.0050511365,-9.337415E-5,-2.8059536E-4,9.113569E-4,0.007405195,-0.008044153,0.008629305,-0.034759354,0.025329668,-0.008528417,0.019074598,0.02602916,-0.020527389,-0.008972325,0.0013241578,0.022572057,-0.0053975196,-7.104212E-4,0.028383218,-0.008420803,0.014635517,0.021159621,0.028813675,0.0031023126,0.020782972,0.008979051,0.027347432,-0.0035714428,-0.01133311,0.023231193,3.570497E-5,-0.0018294397,0.0046005026,-0.011393642,-0.0034436511,-0.005044411,-0.0028046924,-0.008622579,7.1798783E-4,-0.002792922,0.019814445,0.011286029,0.0048258197,-0.0041599576,0.0128195295,0.03115428,-0.0137477005,-0.0046677613,-0.022074342,-0.008212301,-0.014568258,-0.00889834,0.010795039,0.010875749,0.03747661,0.015482978,-0.015617495,-0.00950367,0.023217741,-0.0025861012,-0.027576113,-0.006776325,0.0039817216,0.007748215,0.008225753,-0.027737534,-0.006123915,0.0010744595,0.004375186,0.012624479,0.020971296,0.010431842,0.018523077,-7.688523E-4,-0.0144068375,0.029136516,-0.021590078,-0.008037427,0.0070419973,-0.001031582,0.03419438,-0.011736662,0.019881705,-0.010115725,0.026163677,-0.010404938,0.0043180156,7.5624126E-4,-0.018132975,-0.00790291,-0.008710016,-2.7407965E-4,-0.008770549,-0.017608356,1.6173642E-4,0.0016226188,-0.0032990447,0.021132719,0.024011396,-0.023163935,-0.0070285457,-4.558361E-5,-0.0048863525,0.026056062,0.007802022,0.010983364,0.0023809618,-0.0070285457,-0.013989832,-0.017877392,-5.7380175E-4,-0.011803921,-0.020258354,0.017312419,-0.018617239,-0.017245159,0.012261281,0.0069680125,-0.05404918,-0.015832724,0.003917826,-0.008104687,-0.009261538,0.013155824,-0.010929557,-0.013337422,-0.030400982,0.0068099545,-2.2555347E-5,-0.008716742,0.011097704,0.013868767,0.0031762973,-0.01961267,0.011783743,0.016357342,-0.003793397,0.020809876,-0.001231677,0.010929557,-0.026540326,0.04040909,-0.01771597,0.010452019,-0.014124351,0.033790827,0.005703547,-0.009786157,0.00832664,0.025275862,0.009530573,0.027898954,-0.007748215,0.02511444,0.0033024077,-0.012705189,0.0060869223,0.009120295,0.020702261,0.011911536,0.006292062,-0.013774605,-0.016101759,-0.0046677613,-0.007075627,0.007176515,-0.014447193,0.0048190937,-0.014931456,-0.007459002,-0.01892663,-0.0070352717,0.0058044354,0.0014897827,0.013545925,0.012570672,-0.018132975,0.015684756,0.003672331,-0.033844635,0.0116425,3.9850845E-4,-0.016115211,0.0022397183,-0.0022935255,7.1798783E-4,0.017446935,-0.030320272,0.025248958,0.007452276,-0.012651382,0.012563946,0.026580682,-0.016962672,0.010889201,-3.4806435E-4,0.031261895,0.010546181,-0.015899982,0.0068738502,-0.01657257,0.009765979,-0.027952762,-0.020944394,0.01332397,-0.03521671,-0.023258097,0.0069747386,0.027051494,0.029028902,0.0040557063,0.028732963,0.003998536,0.0033780737,0.02413246,-0.007506083,-0.017500743,-0.014635517,-0.010943009,-0.009443137,0.02037942,-0.034705546,0.0013628317,-3.3629406E-4,0.019451248,0.0010214932,0.0116425,-0.014850745,-0.0010811854,0.014891101,-0.031127378,-0.012543768,0.004580325,0.028948192,0.011951891,1.5501054E-4,4.1637407E-4,0.014514451,-0.016007597,-0.015106329,-0.0056127477,-0.014689324,0.020271806,0.010404938,-0.021872565,-0.0075935195,0.035996914,-0.0048224567,-0.05106289,-0.012368895,0.0017235071,-0.010673973,-0.03849894,-0.024159364,0.026970783,-0.0018462543,-0.0043920004,0.0027828333,0.01435303,-0.003961544,-0.00259619,-0.0267152,0.004015351,-6.337041E-5,-0.0037429528,0.024159364,-0.008891615,-0.017298967,0.032741588,0.020083481,2.0374691E-5,-0.00462068,-0.030643115,0.005323535,0.044363912,0.027845148,-0.010754684,0.0056800065,-0.010546181,-0.0110708,-0.02550454,-0.013465214,0.010236791,0.019074598,0.004805642,-0.0044996142,0.017931199,-0.003189749,-0.0071361596,-0.0021892742,0.018025361,-0.031315703,0.0030148763,0.0019959053,-0.015684756,-0.001958913,0.008044153,0.01526775,0.025208602,0.010956461,0.03352179,0.024858857,0.005528674,-0.019437796,-0.012967499,-0.006614904,0.009402782,0.007169789,-0.0038875593,0.04304564,-0.009557477,0.014339578,0.0069814646,0.007849103,0.031719256,0.04024767,-0.008562046,-0.02962078,0.011030445,-0.022558605,0.009739076,0.012281459,-0.029486263,-0.013512295,0.013418132,0.022074342,-0.024831953,-0.014218513,0.0071428856,0.0070890784,-0.0062617953,-0.009523847,-0.014675872,-0.031127378,-0.019451248,-0.030400982,-0.003793397,-0.017958103,-0.02145556,-0.0090059545,-0.03161164,-0.0062382547,-0.011797195,0.0077145854,-0.020782972,-0.0051385732,-0.023110127,-0.007882733,-0.010182984,-0.002170778,0.035082195,0.0019118317,-0.016612926,0.016195921,0.004005262,-0.0039043739,0.009981208,-0.009712173,-0.0073043066,0.009100117,-0.01587308,-0.005125121,0.01503907,-0.01301458,0.008750372,-0.011911536,0.013344148,0.014151254,0.0056732805,0.0015637673,0.02335226,0.01916876,-0.007842378,-0.017689068,9.7609346E-4,-0.03922534,-0.012711915,-0.019343633,0.023379162,-0.005155388,0.006900754,-0.002685308,-0.015469526,-0.020621551,0.017568002,0.0064131278,0.035835493,-0.0118711805,0.02717256,0.003371348,-0.0042238533,0.013216356,-0.0027172558,-0.0058481535,0.007358114,-0.015509882,0.024939567,0.043691322,-0.032903012,0.034436513,0.0040422543,0.007633875,-0.02932484,0.0034436511,0.008797453,0.010976638,-0.0077616666,-0.015294653,-0.0067258812,-0.0015789006,-0.0068603987,0.019316731,0.004180135,-0.028114183,-0.009577654,-0.027212914,0.008770549,-0.023298452,0.055636488,-0.029378649,-0.018065717,0.0018563431,-0.005750628,0.021495916,0.0013476984,-0.013687168,0.017366225,0.0031477124,-0.025437282,-0.029997429,-0.016303536,-0.009853416,0.023702005,0.021415206,0.029997429,-0.004741746,0.04557457,0.013350874,-0.010310776,4.5567844E-4,0.01969338,0.020500485,-0.01580582,0.0096381875,0.009073214,0.015281201,-0.013384503,-0.013021306,0.0053067203,8.995866E-4,-0.008306463,-0.02305632,-0.015173588,-0.05870349,0.008575498,0.0077751186,8.2980556E-4,0.0035310877,-0.018940082,0.01255722,0.050444108,0.012604301,0.015065974,-0.004862812,0.014420289,-0.017702518,0.008023976,0.0021304227,0.0071966927,-0.018603787,-0.012456331,-0.023311904,-0.0038270263,0.038256813,0.016922317,0.025141343,0.021939823,-0.012913692,0.0023355621,0.0014595162,-0.00904631,-0.010707603,-0.014003284,-0.035996914,1.2463899E-4,-0.023661649,-0.012779174,-0.043637518,0.021428658,0.014083995,-0.0022111335,0.028759867,-0.016801251,0.003618524,0.0026752192,-0.0020513937,0.032553263,-0.0027340706,0.018523077,0.055017706,0.0038337521,-0.030589307,-0.038310617,0.0018260767,-5.637129E-4,0.02511444,0.049583197,-0.0086965645,-0.0067729624,0.00950367,0.011090978,0.0012787582,-0.020554293,0.0011576923,0.007290855,-0.004200313,-0.0049637,-0.009577654,-0.0052394615,0.011682855,-0.022558605,-0.021469012,-0.023500228,-0.020433227,0.0059019607,0.009301893,-0.0014073906,0.008575498,0.016290084,-0.0073917434,0.011696307,-0.005367253,0.0030468241,0.019209117,-0.012651382,0.025813932,-0.0030014245,0.0080777835,0.0021052007,0.01588653,-0.003732864,0.005145299,-0.011467627,0.043987263,-0.01587308,-0.010135903,-0.013505569,-0.0024061839,0.026849717,-0.010768136,-0.004785464,-0.008037427,-0.023876878,0.007849103,-0.010687425,0.005777532,0.010445293,0.0048829895,-0.0043146526,-0.019962415,0.013492118,-0.0020144014,-0.0018243953,-0.018819015,-0.010768136,0.008710016,-0.033629406,-0.0137544265,-6.6291966E-4,0.0052966313,0.008965599,0.009342249,-0.019182213,0.013216356,0.013404681,-0.019155309,-0.026688296,-0.0021220155,-0.01665328,-0.014648969,0.020043125,-0.016047953,-0.0058077984,-0.018509625,0.009086666,0.013922574,-0.032929912,-0.002564242,0.064407036,-0.0011930031,0.0128195295,0.0013863723,-0.009416234,0.005501771,-0.025316216,-0.016518764,0.0021472375,-0.026378905,0.040355287,0.0011677811,0.01786394,3.7013364E-4,-0.045144115,-0.07931159,-7.7263557E-4,0.012389073,-0.031799965,-0.020043125,-0.04067813,-0.01290024,-0.01206623,0.01481039,-0.014366481,0.0036387017,0.038203005,-0.006665348,0.011353287,0.011212043,0.016976124,0.010263694,-0.021213429,-0.006914206,-0.042615183,0.010559633,-0.021065459,0.008905066,0.012489961,-0.010182984,0.0017823585,-0.018334752,-0.017379677,-0.02259896,-0.0209982,0.027132204,-0.0065846373,-4.2856473E-4,0.03123499,-0.007122708,-0.008145042,0.01626318,-0.012933869,0.0028669068,-0.008494788,-0.026177129,0.012866611,-9.453016E-5,-0.046166446,-0.02046013,-0.0017209848,-0.008723468,-0.004469348,0.014796939,-0.014823842,0.002602916,0.008884889,-0.010438567,-0.025154795,0.0039850846,0.020971296,-0.019437796,-0.017568002,-0.009268264,-0.022612412,-0.009624735,-0.007997072,0.012785899,-0.016370794,0.010519278,-0.013088564,-0.012658108,-0.0137611525,0.0029257583,2.486474E-4,0.013048209,-0.0054378747,0.03494768,-0.008884889,-0.006170996,-0.0054546897,-0.005599296,-0.03228423,0.0046475837,0.0018176694,-0.0030115133,0.031046666,-0.011703033,0.021321043,0.00311072,-0.009147198,-0.016935768,-0.016357342,-0.035754785,0.016303536,0.020621551,0.016532216,-0.012301637,0.0021119267,-0.017366225,-0.01526775,-0.011077526,0.006369409,-0.005081403,-0.024858857,0.023621295,0.0039380034,-0.0034436511,-0.02068881,0.016774347,0.0023019328,-0.0021354672,0.2924951,-8.449388E-4,0.0071092565,-0.012698463,0.018590335,0.03427509,0.028732963,0.020043125,-0.008642757,0.02237028,-0.0056463773,-0.008192123,-0.0055757556,-0.00519238,5.6034996E-4,-0.036050722,-0.022800736,-0.020016221,-0.011965343,-0.03266088,0.019330183,0.0027794703,-0.0063626836,-0.03352179,0.005653103,-0.0046610357,0.0056228368,-0.0016991257,0.0054412377,0.010909379,-0.02571977,0.012563946,0.018819015,3.5836335E-4,-0.013404681,-0.0105932625,-0.005074677,-0.0115416115,0.013788057,0.0045635104,0.018724853,-0.013512295,0.007129434,-0.031719256,0.0069343834,0.03473245,-0.004576962,-0.0064669345,-0.010916105,0.015604044,-0.006608178,0.0029593876,0.010209887,0.022020534,0.007869281,0.02932484,0.032929912,6.1117503E-6,-0.0015242528,-0.001501553,-0.012718641,0.014904552,0.010055192,0.017298967,0.0045971395,-0.008857985,-0.011689581,0.013216356,0.009523847,-0.010707603,-0.010949735,-0.030320272,-0.017164448,-0.00832664,-0.05762735,-0.044148684,0.016586022,0.020635003,0.0024667168,0.04183498,-0.0025289312,-0.02297561,0.0020749343,-0.02206089,-0.01503907,-0.028867481,0.03061621,-0.0071025304,-0.025988804,-0.016518764,-0.010916105,-0.0031544382,-0.0090059545,-0.004953611,0.018576883,0.009570928,0.030562403,0.028652253,-0.010768136,-0.013465214,-0.025679413,0.053753242,0.023823071,5.1705213E-4,-0.029916719,0.0027155746,-0.015133233,0.00564974,0.014460645,-0.014635517,-0.016680185,-0.051869996,-0.0040994245,0.004355008,-3.4301993E-4,0.016518764,0.0071361596,-0.009631461,0.006628356,-0.007532987,0.023190837,-0.04379894,-0.007694408,0.023863425,-0.020406323,-0.027683726,-0.019410893,0.0030350538,-0.024145912,-0.013216356,0.03685783,-0.033710115,0.004170046,-0.011117881,-0.007405195,0.012732093,-0.011575242,0.019451248,-0.0115416115,-0.0099677555,0.013707345,-0.019034244,0.0071496116,-0.0024902574,-0.0027811518,-0.0051116697,0.016464956,0.0030720462,0.0023540584,-0.02924413,-0.010082096,0.009691995,0.0063458686,-0.0035781688,0.024630176,-0.0052764537,-0.047457818,-0.0036958717,-0.00801725,0.011682855,-0.043449193,-0.014151254,0.027683726,-0.011851002,-0.020648455,-0.007122708,-0.1709988,0.0134383105,0.022397185,-0.025665961,0.036669504,0.029378649,0.0059725824,0.0031762973,-0.017568002,0.0014099128,0.020675357,-0.0066518965,-0.009369153,-7.516172E-4,0.003364622,0.010916105,-0.02633855,0.01141382,0.04040909,0.0059355902,0.009523847,-0.011265851,-0.010088822,0.002834959,0.008797453,0.005653103,-0.0051083067,0.007573342,0.01198552,-0.007923088,-0.016599474,-0.015375364,0.009537299,-0.015442623,0.01815988,0.007169789,-0.00253902,-0.0049401596,-0.027898954,0.030858342,0.03007814,0.03594311,0.02046013,0.014231964,-0.0023641472,0.027508853,0.008272834,-0.018953532,0.025235506,-0.004751835,0.027603015,-0.029647684,0.021643884,-0.0053975196,0.0069747386,0.02266622,-0.0075531644,-0.0077683926,0.0033999328,0.0080576055,0.024939567,-0.007344662,0.019074598,0.010337679,0.014205061,-0.006342506,-0.026580682,0.03298372,-0.0167878,0.00299638,5.8809423E-4,-0.022867996,0.0015040751,0.009174102,0.02580048,0.013176001,-0.011016993,0.023311904,0.012220926,-0.020043125,-0.007687682,9.836601E-4,-0.014689324,-0.009853416,-0.024683984,-0.0064299423,-0.008521691,-0.019141857,0.03962889,-0.008575498,0.016088307,-0.028571542,-0.024024848,0.0035983464,0.014904552,0.01232854,0.0021623708,-0.007176515,0.008878163,0.0053874305,0.010485648,-0.011615597,3.7685953E-4,6.9066393E-4,-0.0043247417,-0.01503907,0.0134517625,0.01557714,0.038445137,-0.011655952,-0.0121738445,0.013102016,0.009940852,0.016505312,0.002666812,0.032633975,-0.018428914,-0.007573342,0.0056026587,-0.014258868,0.0112389475,0.008595676,-0.018455818,0.012880062,0.0024145914,-0.0020194459,-0.06069435,-0.03174616,0.042238533,0.031557836,0.0054446007,0.014326126,-0.0061508184,0.021778403,-0.054694865,0.033333465,0.0039413664,-0.0312888,-0.0083871735,0.017823584,0.02015074,-3.1947935E-4,0.0046475837,-3.8757888E-4,-0.008239204,0.028679157,-0.011111155,-0.024226623,0.017379677,-0.0043112896,-0.0040422543,0.011824098,-0.013525747,0.02419972,0.017756326,-2.3987224E-5,0.030562403,-0.017204804,0.015052522,-0.0112187695,-0.017581454,-0.028948192,-0.036023818,-0.02550454,0.035297424,0.0013048209,0.0059692194,-0.0053403494,0.019935511,-0.01778323,0.0047619236,-0.0031124013,-0.0013577873,0.0358893,0.010142629,-0.019141857,-0.027522305,0.017756326,-0.016760895,0.022020534,0.019908607,5.498408E-4,0.03559336,0.0075598904,-0.0040893354,0.0144068375,0.019962415,-0.007929814,-0.043449193,0.011797195,0.019128406,0.0061474554,-0.01324326,-0.003897648,-0.001812625,-0.009483492,-0.006170996,0.0046408577,-0.025208602,-0.0027374336,-0.032903012,-0.0025373385,-0.0030350538,-0.011945165,-3.470134E-4,-0.0014460644,-0.012550494,-0.017527645,0.0062584323,-0.013909122,0.03771874,0.014312675,-0.0047652866,-0.017352773,-6.8772136E-4,-0.014891101,-0.025531445,0.014514451,0.024791598,-0.03214971,-0.009718898,0.010620167,0.023298452,-0.004634132,-0.017850488,0.02449566,-9.61801E-4,-0.0305355,-0.09722934,0.016922317,4.098584E-4,-0.007465728,0.019047694,-0.006776325,0.025370024,0.0016217781,-0.01587308,-0.013330696,-0.026513424,-0.021966727,-0.008151768,0.0053403494,-0.017191352,-0.011164962,0.013801508,0.007949991,0.00559257,0.01381496,8.4788137E-4,0.0024330874,0.017729422,-0.0048964415,-0.007519535,0.0033192222,-0.01938399,9.954304E-4,-0.011750114,0.008629305,0.006204625,0.004869538,-0.005760717,0.012348718,-0.015321557,-0.036615696,0.02037942,0.022181956,0.009463315,0.05205832,-0.024845405,-0.025827384,0.012308362,-0.02145556,-0.012429428,0.005047774,0.0020951119,0.023715457,0.024616724,-0.03352179,0.008198849,0.009133747,-0.012288185,-0.0171779,0.017406581,-0.023540584,0.005713636,0.013283615,-0.014326126,0.011205317,0.028006569,0.011803921,-8.8949775E-4,-0.021442108,0.0029089435,-0.007923088,-0.013566102,0.0075531644,0.012913692,0.006786414,-0.018523077,-0.018213686,1.9263344E-4,0.016774347,-0.0183213,-0.0047282944,0.019262923,0.010438567,0.0019168761,0.032849204,-0.007344662,0.008730194,0.022652768,-3.2935798E-4,0.018267494,0.028437026,-0.019706832,-0.0065980894,-0.0058414275,0.0047182054,0.013962929,0.01301458,-0.015523333,-0.0058077984,-0.009396056,3.709744E-4,0.0021573263,-0.013734249,0.027818244,0.024872309,0.016209373,0.006120552,0.018442366,-0.01709719,-0.037288286,0.014191609,-0.03136951,-0.012140215,0.016895413,-0.0028114184,0.019020792,0.002560879,-0.014003284,0.0090126805,-0.007418647,0.00984669,-0.010869023,-0.043987263,-0.03419438,0.03809539,0.014998714,0.04283041,-0.0069680125,-0.012772448,0.02779134,0.021065459,0.015698206,-0.028356314,0.006503927,-0.018469268,-0.026230937,-0.0056396513,-0.010707603,-0.025733221,-0.02787205,-3.7749007E-4,-0.024145912,-0.0023002513,0.006369409,0.04952939,0.019061146,-0.008212301,0.021092363,-0.0051049436,-0.024858857,-0.006712429,-0.0024700798,-1.0346297E-4,-0.049744617,0.029566973,-0.024441851,-0.017245159,-0.027011137,-0.023015965,0.002453265,-0.015200491,0.008454433,-0.015980693,0.035324328,0.014944907,-0.007748215,0.011077526,0.026580682,-0.050255783,-0.008952147,0.03182687,0.0052697277,0.012274733,-0.01663983,0.023150483,0.012503413,-0.04366442,-0.012664834,0.0069411094,-0.015846176,-0.025988804,-0.010102273,0.020217998,0.011474353,-0.028759867,-0.0061440924,-0.027845148,-0.018603787,0.013209631,-0.012254556,-0.021213429,-0.010263694,-0.0031594827]')  was aborted: ERROR: relation "public.vector_store_openai" does not exist
  位置：13  Call getNextException to see other errors in the batch.
	at org.postgresql.jdbc.BatchResultHandler.handleCompletion(BatchResultHandler.java:186)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:591)
	at org.postgresql.jdbc.PgStatement.internalExecuteBatch(PgStatement.java:889)
	at org.postgresql.jdbc.PgStatement.executeBatch(PgStatement.java:913)
	at org.postgresql.jdbc.PgPreparedStatement.executeBatch(PgPreparedStatement.java:1739)
	at com.zaxxer.hikari.pool.ProxyStatement.executeBatch(ProxyStatement.java:127)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeBatch(HikariProxyPreparedStatement.java)
	at org.springframework.jdbc.core.JdbcTemplate.lambda$getPreparedStatementCallback$7(JdbcTemplate.java:1617)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:658)
	... 60 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: relation "public.vector_store_openai" does not exist
  位置：13
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:580)
	... 67 common frames omitted
25-08-12.13:28:46.119 [http-nio-8080-exec-3] WARN  PostScriptTable        - No PostScript name data is provided for the font iconfont
25-08-12.13:28:49.366 [http-nio-8080-exec-3] ERROR AiAgentController      - 上传知识库，异常 测试
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '测试' for key 'ai_rag_order.uk_rag_name'
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_rag_order_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiRagOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_rag_order (             rag_name, knowledge_tag, status, create_time, update_time         ) VALUES (             ?, ?, ?, ?, ?         )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '测试' for key 'ai_rag_order.uk_rag_name'
; Duplicate entry '测试' for key 'ai_rag_order.uk_rag_name'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:254)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy77.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository.createTagOrder(AgentRepository.java:332)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.createTagOrder(<generated>)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:52)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '测试' for key 'ai_rag_order.uk_rag_name'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 66 common frames omitted
25-08-12.13:30:35.889 [http-nio-8080-exec-5] WARN  PostScriptTable        - No PostScript name data is provided for the font iconfont
25-08-12.13:31:03.764 [PgVectorHikariPool housekeeper] WARN  HikariPool             - PgVectorHikariPool - Thread starvation or clock leap detected (housekeeper delta=55s86ms559µs899ns).
25-08-12.13:33:04.323 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=2m558ms743µs901ns).
25-08-12.13:33:04.324 [PgVectorHikariPool housekeeper] WARN  HikariPool             - PgVectorHikariPool - Thread starvation or clock leap detected (housekeeper delta=2m559ms61µs501ns).
25-08-12.13:33:14.348 [http-nio-8080-exec-5] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@47e0e369 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.13:33:23.826 [http-nio-8080-exec-4] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@3ab994f1 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.13:33:24.376 [http-nio-8080-exec-5] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@da97437 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.13:33:33.837 [http-nio-8080-exec-4] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2d2180e5 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.13:33:34.388 [http-nio-8080-exec-5] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@4795d555 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.13:33:34.427 [http-nio-8080-exec-5] ERROR AiAgentController      - 上传知识库，异常 测试
org.mybatis.spring.MyBatisSystemException: 
### Error updating database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_rag_order_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiRagOrderDao.insert
### The error occurred while executing an update
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:99)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy77.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository.createTagOrder(AgentRepository.java:332)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.createTagOrder(<generated>)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:52)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_rag_order_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiRagOrderDao.insert
### The error occurred while executing an update
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:199)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 66 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:77)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:64)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:49)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	... 70 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: MainHikariPool - Connection is not available, request timed out after 30062ms (total=6, active=0, idle=6, waiting=0)
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:686)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:179)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:144)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 78 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2488)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:562)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:169)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:168)
	... 83 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:762)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:569)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2484)
	... 86 common frames omitted
25-08-12.13:34:31.821 [http-nio-8080-exec-1] WARN  PostScriptTable        - No PostScript name data is provided for the font iconfont
25-08-12.13:34:36.748 [http-nio-8080-exec-1] ERROR AiAgentController      - 上传知识库，异常 1
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_rag_order.uk_rag_name'
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_rag_order_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiRagOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_rag_order (             rag_name, knowledge_tag, status, create_time, update_time         ) VALUES (             ?, ?, ?, ?, ?         )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_rag_order.uk_rag_name'
; Duplicate entry '1' for key 'ai_rag_order.uk_rag_name'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:254)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy77.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository.createTagOrder(AgentRepository.java:332)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.createTagOrder(<generated>)
	at com.onepiece.domain.agent.service.rag.AiAgentRagService.storeRagFile(AiAgentRagService.java:52)
	at com.onepiece.trigger.http.AiAgentController.uploadRagFile(AiAgentController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_rag_order.uk_rag_name'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 66 common frames omitted
25-08-12.13:42:48.660 [SpringApplicationShutdownHook] WARN  HikariPool             - Timed-out waiting for close connection executor to shutdown
25-08-12.13:43:53.564 [http-nio-8080-exec-1] WARN  PostScriptTable        - No PostScript name data is provided for the font iconfont
25-08-12.14:07:07.867 [http-nio-8080-exec-2] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@391bdb1d (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.14:07:08.093 [http-nio-8080-exec-7] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@666cddfe (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.14:07:17.887 [http-nio-8080-exec-2] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5a692671 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.14:07:18.125 [http-nio-8080-exec-7] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@39f3b98 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.14:07:24.187 [http-nio-8080-exec-3] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@65f95361 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.14:16:59.503 [http-nio-8080-exec-7] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7deb521e (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.14:17:09.528 [http-nio-8080-exec-7] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7d144be (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.14:17:19.555 [http-nio-8080-exec-7] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@16405a5c (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.14:17:19.567 [http-nio-8080-exec-7] ERROR AiAdminAgentController - 查询AI智能体列表异常
org.mybatis.spring.MyBatisSystemException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiAgentDao.queryAiAgentList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:99)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy77.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy79.queryAiAgentList(Unknown Source)
	at com.onepiece.trigger.http.admin.AiAdminAgentController.queryAiAgentList(AiAdminAgentController.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [C:\xmz_xiangmu\2025\SmartAI-Assistant\SmartAI-Assistant\dev-fetch-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.onepiece.infrastructure.dao.IAiAgentDao.queryAiAgentList
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 56 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:77)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:64)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 61 common frames omitted
Caused by: java.sql.SQLTransientConnectionException: MainHikariPool - Connection is not available, request timed out after 30092ms (total=5, active=0, idle=5, waiting=0)
	at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:686)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:179)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:144)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:127)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 71 common frames omitted
Caused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2488)
	at com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:562)
	at com.zaxxer.hikari.pool.PoolBase.isConnectionDead(PoolBase.java:169)
	at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:168)
	... 76 common frames omitted
Caused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
	at com.mysql.cj.NativeSession.checkClosed(NativeSession.java:762)
	at com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:569)
	at com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2484)
	... 79 common frames omitted
25-08-12.14:17:33.509 [http-nio-8080-exec-5] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@5658c448 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.14:17:43.518 [http-nio-8080-exec-5] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2c691f0c (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.15:15:14.594 [SpringApplicationShutdownHook] WARN  HikariPool             - Timed-out waiting for close connection executor to shutdown
25-08-12.15:19:48.147 [http-nio-8080-exec-10] ERROR AiAgentController      - AiAgent 智能体对话，异常 4 你是
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ChatClient_4' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:951)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1382)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1272)
	at com.onepiece.domain.agent.service.armory.factory.DefaultArmoryStrategyFactory.chatClient(DefaultArmoryStrategyFactory.java:42)
	at com.onepiece.domain.agent.service.chat.AiAgentChatService.aiAgentChat(AiAgentChatService.java:58)
	at com.onepiece.trigger.http.AiAgentController.chatAgent(AiAgentController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:20:17.310 [boundedElastic-1] ERROR Operators              - Operator called default onErrorDropped
reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.RuntimeException: Failed to start process with command: [npx, -y, g-search-mcp]
Caused by: java.lang.RuntimeException: Failed to start process with command: [npx, -y, g-search-mcp]
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$connect$1(StdioClientTransport.java:132)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Assembly trace from producer [reactor.core.publisher.MonoSubscribeOnCallable] :
	reactor.core.publisher.Mono.subscribeOn(Mono.java:4625)
	io.modelcontextprotocol.client.transport.StdioClientTransport.connect(StdioClientTransport.java:145)
Error has been observed at the following site(s):
	*__Mono.subscribeOn ⇢ at io.modelcontextprotocol.client.transport.StdioClientTransport.connect(StdioClientTransport.java:145)
Original Stack Trace:
		at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$connect$1(StdioClientTransport.java:132)
		at reactor.core.publisher.MonoRunnable.call(MonoRunnable.java:73)
		at reactor.core.publisher.MonoRunnable.call(MonoRunnable.java:32)
		at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:228)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
		at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
		at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
		at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.io.IOException: Cannot run program "npx": CreateProcess error=2, 系统找不到指定的文件。
	at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1170)
	at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1089)
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$connect$1(StdioClientTransport.java:129)
	at reactor.core.publisher.MonoRunnable.call(MonoRunnable.java:73)
	at reactor.core.publisher.MonoRunnable.call(MonoRunnable.java:32)
	at reactor.core.publisher.MonoCallableOnAssembly.call(MonoCallableOnAssembly.java:91)
	at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:228)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.io.IOException: CreateProcess error=2, 系统找不到指定的文件。
	at java.base/java.lang.ProcessImpl.create(Native Method)
	at java.base/java.lang.ProcessImpl.<init>(ProcessImpl.java:506)
	at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:159)
	at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1126)
	... 14 common frames omitted
25-08-12.15:23:17.334 [http-nio-8080-exec-2] ERROR AiAgentController      - 预热装配 AiAgent 4
reactor.core.Exceptions$ReactiveException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 180000ms in 'Mono.create ⇢ at io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:228)' (and no fallback has been configured)
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at io.modelcontextprotocol.client.McpSyncClient.initialize(McpSyncClient.java:153)
	at com.onepiece.domain.agent.service.armory.node.AiClientToolMcpNode.createMcpSyncClient(AiClientToolMcpNode.java:109)
	at com.onepiece.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:48)
	at com.onepiece.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:29)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.onepiece.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:70)
	at com.onepiece.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:23)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.preheat.AiAgentPreheatService.preheat(AiAgentPreheatService.java:41)
	at com.onepiece.trigger.http.AiAgentController.preheat(AiAgentController.java:60)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 60 common frames omitted
Caused by: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 180000ms in 'Mono.create ⇢ at io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:228)' (and no fallback has been configured)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Assembly trace from producer [reactor.core.publisher.MonoTimeout] :
	reactor.core.publisher.Mono.timeout(Mono.java:5007)
	io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:239)
Error has been observed at the following site(s):
	*__Mono.timeout ⇢ at io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:239)
	|_  Mono.handle ⇢ at io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:239)
	|_ Mono.flatMap ⇢ at io.modelcontextprotocol.client.McpAsyncClient.initialize(McpAsyncClient.java:328)
Original Stack Trace:
		at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
		at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:281)
		at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:420)
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
		at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:270)
		at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:285)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
		at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
		at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
		at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:24:36.546 [pool-2-thread-9 ] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@4354ba3e (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.15:24:36.553 [pool-2-thread-10] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@261e0072 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.15:24:36.553 [pool-2-thread-7 ] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@19d1bcd1 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.15:24:36.622 [boundedElastic-2] ERROR Operators              - Operator called default onErrorDropped
reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.RuntimeException: Failed to start process with command: [npx, -y, g-search-mcp]
Caused by: java.lang.RuntimeException: Failed to start process with command: [npx, -y, g-search-mcp]
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$connect$1(StdioClientTransport.java:132)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Assembly trace from producer [reactor.core.publisher.MonoSubscribeOnCallable] :
	reactor.core.publisher.Mono.subscribeOn(Mono.java:4625)
	io.modelcontextprotocol.client.transport.StdioClientTransport.connect(StdioClientTransport.java:145)
Error has been observed at the following site(s):
	*__Mono.subscribeOn ⇢ at io.modelcontextprotocol.client.transport.StdioClientTransport.connect(StdioClientTransport.java:145)
Original Stack Trace:
		at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$connect$1(StdioClientTransport.java:132)
		at reactor.core.publisher.MonoRunnable.call(MonoRunnable.java:73)
		at reactor.core.publisher.MonoRunnable.call(MonoRunnable.java:32)
		at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:228)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
		at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
		at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
		at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.io.IOException: Cannot run program "npx": CreateProcess error=2, 系统找不到指定的文件。
	at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1170)
	at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1089)
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$connect$1(StdioClientTransport.java:129)
	at reactor.core.publisher.MonoRunnable.call(MonoRunnable.java:73)
	at reactor.core.publisher.MonoRunnable.call(MonoRunnable.java:32)
	at reactor.core.publisher.MonoCallableOnAssembly.call(MonoCallableOnAssembly.java:91)
	at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:228)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.io.IOException: CreateProcess error=2, 系统找不到指定的文件。
	at java.base/java.lang.ProcessImpl.create(Native Method)
	at java.base/java.lang.ProcessImpl.<init>(ProcessImpl.java:506)
	at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:159)
	at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1126)
	... 14 common frames omitted
25-08-12.15:27:36.631 [http-nio-8080-exec-1] ERROR AiAgentController      - 预热装配 AiAgent 4
reactor.core.Exceptions$ReactiveException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 180000ms in 'Mono.create ⇢ at io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:228)' (and no fallback has been configured)
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at io.modelcontextprotocol.client.McpSyncClient.initialize(McpSyncClient.java:153)
	at com.onepiece.domain.agent.service.armory.node.AiClientToolMcpNode.createMcpSyncClient(AiClientToolMcpNode.java:109)
	at com.onepiece.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:48)
	at com.onepiece.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:29)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.onepiece.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:70)
	at com.onepiece.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:23)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.preheat.AiAgentPreheatService.preheat(AiAgentPreheatService.java:41)
	at com.onepiece.trigger.http.AiAgentController.preheat(AiAgentController.java:60)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 60 common frames omitted
Caused by: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 180000ms in 'Mono.create ⇢ at io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:228)' (and no fallback has been configured)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Assembly trace from producer [reactor.core.publisher.MonoTimeout] :
	reactor.core.publisher.Mono.timeout(Mono.java:5007)
	io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:239)
Error has been observed at the following site(s):
	*__Mono.timeout ⇢ at io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:239)
	|_  Mono.handle ⇢ at io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:239)
	|_ Mono.flatMap ⇢ at io.modelcontextprotocol.client.McpAsyncClient.initialize(McpAsyncClient.java:328)
Original Stack Trace:
		at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
		at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:281)
		at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:420)
		at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
		at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:270)
		at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:285)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
		at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
		at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
		at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:30:10.223 [http-nio-8080-exec-2] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6a07bacd (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.15:30:10.223 [http-nio-8080-exec-3] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2c968cb5 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.15:30:10.223 [http-nio-8080-exec-6] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@4d88fa1b (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.15:30:10.223 [http-nio-8080-exec-4] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@4f5a0527 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.15:30:17.428 [http-nio-8080-exec-1] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@18ccbc41 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-08-12.15:33:21.209 [pool-2-thread-11] ERROR AgentRepository        - Query ai agent client flow config failed, aiAgentId: 4
org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.onepiece.infrastructure.dao.IAiAgentFlowConfigDao.queryByAgentId
	at org.apache.ibatis.binding.MapperMethod$SqlCommand.<init>(MapperMethod.java:229)
	at org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:53)
	at org.apache.ibatis.binding.MapperProxy.lambda$cachedInvoker$0(MapperProxy.java:96)
	at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)
	at org.apache.ibatis.util.MapUtil.computeIfAbsent(MapUtil.java:36)
	at org.apache.ibatis.binding.MapperProxy.cachedInvoker(MapperProxy.java:94)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy90.queryByAgentId(Unknown Source)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository.queryAiAgentClientFlowConfig(AgentRepository.java:354)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.queryAiAgentClientFlowConfig(<generated>)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:33)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:38)
	at com.onepiece.trigger.http.AiAgentController.lambda$autoAgent$0(AiAgentController.java:174)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:33:21.239 [pool-2-thread-11] ERROR AiAgentController      - AutoAgent执行异常：Cannot invoke "com.onepiece.domain.agent.model.valobj.AiAgentClientFlowConfigVO.getStepPrompt()" because "aiAgentClientFlowConfigVO" is null
java.lang.NullPointerException: Cannot invoke "com.onepiece.domain.agent.model.valobj.AiAgentClientFlowConfigVO.getStepPrompt()" because "aiAgentClientFlowConfigVO" is null
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:32)
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:44)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:38)
	at com.onepiece.trigger.http.AiAgentController.lambda$autoAgent$0(AiAgentController.java:174)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:36:16.931 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=45s86ms537µs300ns).
25-08-12.15:36:16.933 [pool-2-thread-12] ERROR AgentRepository        - Query ai agent client flow config failed, aiAgentId: 4
org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.onepiece.infrastructure.dao.IAiAgentFlowConfigDao.queryByAgentId
	at org.apache.ibatis.binding.MapperMethod$SqlCommand.<init>(MapperMethod.java:229)
	at org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:53)
	at org.apache.ibatis.binding.MapperProxy.lambda$cachedInvoker$0(MapperProxy.java:96)
	at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)
	at org.apache.ibatis.util.MapUtil.computeIfAbsent(MapUtil.java:36)
	at org.apache.ibatis.binding.MapperProxy.cachedInvoker(MapperProxy.java:94)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy90.queryByAgentId(Unknown Source)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository.queryAiAgentClientFlowConfig(AgentRepository.java:354)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.queryAiAgentClientFlowConfig(<generated>)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:33)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:38)
	at com.onepiece.trigger.http.AiAgentController.lambda$autoAgent$0(AiAgentController.java:174)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:36:16.934 [pool-2-thread-12] ERROR AiAgentController      - AutoAgent执行异常：Cannot invoke "com.onepiece.domain.agent.model.valobj.AiAgentClientFlowConfigVO.getStepPrompt()" because "aiAgentClientFlowConfigVO" is null
java.lang.NullPointerException: Cannot invoke "com.onepiece.domain.agent.model.valobj.AiAgentClientFlowConfigVO.getStepPrompt()" because "aiAgentClientFlowConfigVO" is null
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:32)
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:44)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:38)
	at com.onepiece.trigger.http.AiAgentController.lambda$autoAgent$0(AiAgentController.java:174)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:38:21.496 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=57s504ms871µs100ns).
25-08-12.15:38:21.509 [pool-2-thread-13] ERROR AgentRepository        - Query ai agent client flow config failed, aiAgentId: 4
org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.onepiece.infrastructure.dao.IAiAgentFlowConfigDao.queryByAgentId
	at org.apache.ibatis.binding.MapperMethod$SqlCommand.<init>(MapperMethod.java:229)
	at org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:53)
	at org.apache.ibatis.binding.MapperProxy.lambda$cachedInvoker$0(MapperProxy.java:96)
	at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)
	at org.apache.ibatis.util.MapUtil.computeIfAbsent(MapUtil.java:36)
	at org.apache.ibatis.binding.MapperProxy.cachedInvoker(MapperProxy.java:94)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy90.queryByAgentId(Unknown Source)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository.queryAiAgentClientFlowConfig(AgentRepository.java:354)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.queryAiAgentClientFlowConfig(<generated>)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:33)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:38)
	at com.onepiece.trigger.http.AiAgentController.lambda$autoAgent$0(AiAgentController.java:174)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:40:44.450 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=2m22s953ms990µs400ns).
25-08-12.15:40:44.452 [pool-2-thread-13] ERROR AiAgentController      - AutoAgent执行异常：Cannot invoke "com.onepiece.domain.agent.model.valobj.AiAgentClientFlowConfigVO.getStepPrompt()" because "aiAgentClientFlowConfigVO" is null
java.lang.NullPointerException: Cannot invoke "com.onepiece.domain.agent.model.valobj.AiAgentClientFlowConfigVO.getStepPrompt()" because "aiAgentClientFlowConfigVO" is null
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:32)
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:44)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:38)
	at com.onepiece.trigger.http.AiAgentController.lambda$autoAgent$0(AiAgentController.java:174)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:42:26.606 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m9s304ms298µs100ns).
25-08-12.15:43:30.675 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m4s69ms5µs800ns).
25-08-12.15:45:37.676 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m26s976ms708µs).
25-08-12.15:45:41.941 [pool-2-thread-14] ERROR AgentRepository        - Query ai agent client flow config failed, aiAgentId: 4
org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.onepiece.infrastructure.dao.IAiAgentFlowConfigDao.queryByAgentId
	at org.apache.ibatis.binding.MapperMethod$SqlCommand.<init>(MapperMethod.java:229)
	at org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:53)
	at org.apache.ibatis.binding.MapperProxy.lambda$cachedInvoker$0(MapperProxy.java:96)
	at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)
	at org.apache.ibatis.util.MapUtil.computeIfAbsent(MapUtil.java:36)
	at org.apache.ibatis.binding.MapperProxy.cachedInvoker(MapperProxy.java:94)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy90.queryByAgentId(Unknown Source)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository.queryAiAgentClientFlowConfig(AgentRepository.java:354)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.onepiece.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.queryAiAgentClientFlowConfig(<generated>)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:33)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:38)
	at com.onepiece.trigger.http.AiAgentController.lambda$autoAgent$0(AiAgentController.java:174)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:47:24.925 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m47s249ms573µs200ns).
25-08-12.15:47:24.944 [pool-2-thread-14] ERROR AiAgentController      - AutoAgent执行异常：Cannot invoke "com.onepiece.domain.agent.model.valobj.AiAgentClientFlowConfigVO.getStepPrompt()" because "aiAgentClientFlowConfigVO" is null
java.lang.NullPointerException: Cannot invoke "com.onepiece.domain.agent.model.valobj.AiAgentClientFlowConfigVO.getStepPrompt()" because "aiAgentClientFlowConfigVO" is null
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:32)
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:44)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:38)
	at com.onepiece.trigger.http.AiAgentController.lambda$autoAgent$0(AiAgentController.java:174)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.15:47:35.447 [SpringApplicationShutdownHook] WARN  HikariPool             - Timed-out waiting for close connection executor to shutdown
25-08-12.15:50:13.391 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=56s46ms4µs).
25-08-12.15:51:22.221 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m8s831ms22µs100ns).
25-08-12.15:53:00.232 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m2s601ms279µs600ns).
25-08-12.15:53:00.238 [pool-2-thread-1 ] ERROR AiAgentController      - AutoAgent执行异常：No bean named 'ai_client_4101' available
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ai_client_4101' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:951)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1382)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1272)
	at com.onepiece.domain.agent.service.execute.auto.step.AbstractExecuteSupport.getBean(AbstractExecuteSupport.java:48)
	at com.onepiece.domain.agent.service.execute.auto.step.AbstractExecuteSupport.getChatClientByClientId(AbstractExecuteSupport.java:44)
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:40)
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:44)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:38)
	at com.onepiece.trigger.http.AiAgentController.lambda$autoAgent$0(AiAgentController.java:174)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
25-08-12.18:33:10.831 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=2h38m34s456ms987µs500ns).
25-08-12.18:33:11.175 [pool-2-thread-2 ] ERROR AiAgentController      - AutoAgent执行异常：No bean named 'ai_client_4101' available
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ai_client_4101' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:951)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1382)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1272)
	at com.onepiece.domain.agent.service.execute.auto.step.AbstractExecuteSupport.getBean(AbstractExecuteSupport.java:48)
	at com.onepiece.domain.agent.service.execute.auto.step.AbstractExecuteSupport.getChatClientByClientId(AbstractExecuteSupport.java:44)
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:40)
	at com.onepiece.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:44)
	at com.onepiece.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:19)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.onepiece.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:38)
	at com.onepiece.trigger.http.AiAgentController.lambda$autoAgent$0(AiAgentController.java:174)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
